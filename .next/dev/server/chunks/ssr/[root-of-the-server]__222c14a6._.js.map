{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///Users/apcrat/Documents/react/church_suit_business/affiliates/src/lib/db-utils.js"],"sourcesContent":["import { clsx } from \"clsx\";\nimport { twMerge } from \"tailwind-merge\";\nimport crypto from \"crypto\";\nimport { serialize as phpSerialize } from \"php-serialize\";\n\n/**\n * shadcn utility: merges tailwind classes safely\n */\nexport function cn(...inputs) {\n  return twMerge(clsx(inputs));\n}\n\nexport function sha1(str) {\n  return crypto.createHash(\"sha1\").update(String(str)).digest(\"hex\");\n}\n\n// OpenCart-compatible 9-char salt\nexport function generateSalt() {\n  return crypto\n    .createHash(\"md5\")\n    .update(crypto.randomBytes(16).toString(\"hex\") + Date.now())\n    .digest(\"hex\")\n    .substring(0, 9);\n}\n\n// OpenCart hash: sha1(salt . sha1(salt . sha1(password)))\nexport function ocHashPassword(password, salt) {\n  return sha1(salt + sha1(salt + sha1(password)));\n}\n\nexport function ocVerifyPassword(inputPassword, storedSalt, storedHash) {\n  return ocHashPassword(inputPassword, storedSalt) === storedHash;\n}\n\n// OpenCart-style db escape (like $this->db->escape)\nexport function dbEscape(value) {\n  if (value === null || value === undefined) return \"\";\n  return String(value)\n    .replace(/\\\\/g, \"\\\\\\\\\")\n    .replace(/\\u0008/g, \"\\\\b\")\n    .replace(/\\t/g, \"\\\\t\")\n    .replace(/\\0/g, \"\\\\0\")\n    .replace(/\\n/g, \"\\\\n\")\n    .replace(/\\r/g, \"\\\\r\")\n    .replace(/\\u001a/g, \"\\\\Z\")\n    .replace(/\\x1a/g, \"\\\\Z\")\n    .replace(/'/g, \"\\\\'\")\n    .replace(/\"/g, '\\\\\"');\n}\n\n// Save only domain (remove https:// and www)\nexport function stripWebsite(url = \"\") {\n  return String(url)\n    .trim()\n    .replace(/^https?:\\/\\//i, \"\")\n    .replace(/^www\\./i, \"\")\n    .replace(/\\/+$/, \"\");\n}\n\nexport function isEmail(v) {\n  return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]{2,}$/.test(String(v || \"\").trim());\n}\n\nexport function isTenDigitPhone(v) {\n  return /^\\d{10}$/.test(String(v || \"\").trim());\n}\n\nexport function normalizeLogin(v) {\n  return String(v || \"\").trim();\n}\n\nexport function ocSerialize(value) {\n  return phpSerialize(value);\n}\n\nexport function isTruthy(v) {\n  return v === true || v === 1 || v === \"1\" || String(v).toLowerCase() === \"true\";\n}\n\nexport function getClientIp(req) {\n  if (!req?.headers) return \"127.0.0.1\";\n\n  // Proxy / Load balancer / Vercel\n  const xForwardedFor = req.headers.get(\"x-forwarded-for\");\n  if (xForwardedFor) {\n    // Can be: \"client, proxy1, proxy2\"\n    return xForwardedFor.split(\",\")[0].trim();\n  }\n\n  // Cloudflare\n  const cfIp = req.headers.get(\"cf-connecting-ip\");\n  if (cfIp) return cfIp;\n\n  // Fallback (local dev)\n  return \"127.0.0.1\";\n}\n\nexport function getFrontClientIp() {\n  const h = headers();\n\n  // Common proxy headers\n  const xff = h.get(\"x-forwarded-for\");\n  if (xff) return xff.split(\",\")[0].trim();\n\n  const realIp = h.get(\"x-real-ip\");\n  if (realIp) return realIp.trim();\n\n  // Fallback\n  return \"0.0.0.0\";\n}\n\nexport function money(v) {\n  const n = Number(v || 0);\n  return Number.isFinite(n) ? `$${n.toFixed(2)}` : \"$0.00\";\n}\n\nfunction parseDate(input) {\n  if (!input) return null;\n\n  // Already Date object\n  if (input instanceof Date) {\n    return isNaN(input.getTime()) ? null : input;\n  }\n\n  if (typeof input !== \"string\") return null;\n\n  // ISO or yyyy-mm-dd hh:mm:ss (MySQL)\n  if (/^\\d{4}-\\d{2}-\\d{2}/.test(input)) {\n    const d = new Date(input.replace(\" \", \"T\"));\n    return isNaN(d.getTime()) ? null : d;\n  }\n\n  // dd/mm/yyyy or dd/mm/yyyy hh:mm:ss\n  if (/^\\d{2}\\/\\d{2}\\/\\d{4}/.test(input)) {\n    const [datePart, timePart] = input.split(\" \");\n    const [dd, mm, yyyy] = datePart.split(\"/\");\n\n    const iso = `${yyyy}-${mm}-${dd}${timePart ? \"T\" + timePart : \"\"}`;\n    const d = new Date(iso);\n    return isNaN(d.getTime()) ? null : d;\n  }\n\n  // Fallback: let JS try\n  const d = new Date(input);\n  return isNaN(d.getTime()) ? null : d;\n}\n\n/**\n * Format date as MM/DD/YYYY (default)\n */\nexport function formatDate(input, format = \"MM/DD/YYYY\") {\n  const d = parseDate(input);\n\n  if (!d) return \"\";\n\n  const map = {\n    DD: String(d.getDate()).padStart(2, \"0\"),\n    MM: String(d.getMonth() + 1).padStart(2, \"0\"),\n    YYYY: d.getFullYear(),\n    HH: String(d.getHours()).padStart(2, \"0\"),\n    mm: String(d.getMinutes()).padStart(2, \"0\"),\n    ss: String(d.getSeconds()).padStart(2, \"0\"),\n  };\n\n  return format.replace(/DD|MM|YYYY|HH|mm|ss/g, (k) => map[k]);\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 167, "column": 0}, "map": {"version":3,"sources":["file:///Users/apcrat/Documents/react/church_suit_business/affiliates/src/lib/utils.js"],"sourcesContent":["import { clsx } from \"clsx\";\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs) {\n  return twMerge(clsx(inputs));\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAM;IAC1B,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACtB"}},
    {"offset": {"line": 182, "column": 0}, "map": {"version":3,"sources":["file:///Users/apcrat/Documents/react/church_suit_business/affiliates/src/components/ui/card.jsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/db-utils\";\n\nfunction Card({\n  className,\n  ...props\n}) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm\",\n        className\n      )}\n      {...props} />\n  );\n}\n\nfunction CardHeader({\n  className,\n  ...props\n}) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\n        className\n      )}\n      {...props} />\n  );\n}\n\nfunction CardTitle({\n  className,\n  ...props\n}) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn(\"leading-none font-semibold\", className)}\n      {...props} />\n  );\n}\n\nfunction CardDescription({\n  className,\n  ...props\n}) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props} />\n  );\n}\n\nfunction CardAction({\n  className,\n  ...props\n}) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\n        className\n      )}\n      {...props} />\n  );\n}\n\nfunction CardContent({\n  className,\n  ...props\n}) {\n  return (<div data-slot=\"card-content\" className={cn(\"px-6\", className)} {...props} />);\n}\n\nfunction CardFooter({\n  className,\n  ...props\n}) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\n      {...props} />\n  );\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,SAAS,KAAK,EACZ,SAAS,EACT,GAAG,OACJ;IACC,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,+HAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAEf;AAEA,SAAS,WAAW,EAClB,SAAS,EACT,GAAG,OACJ;IACC,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,+HAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAEf;AAEA,SAAS,UAAU,EACjB,SAAS,EACT,GAAG,OACJ;IACC,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,+HAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAEf;AAEA,SAAS,gBAAgB,EACvB,SAAS,EACT,GAAG,OACJ;IACC,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,+HAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAEf;AAEA,SAAS,WAAW,EAClB,SAAS,EACT,GAAG,OACJ;IACC,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,+HAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAEf;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACJ;IACC,qBAAQ,8OAAC;QAAI,aAAU;QAAe,WAAW,IAAA,+HAAE,EAAC,QAAQ;QAAa,GAAG,KAAK;;;;;;AACnF;AAEA,SAAS,WAAW,EAClB,SAAS,EACT,GAAG,OACJ;IACC,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,+HAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAEf"}},
    {"offset": {"line": 286, "column": 0}, "map": {"version":3,"sources":["file:///Users/apcrat/Documents/react/church_suit_business/affiliates/src/components/ui/button.jsx"],"sourcesContent":["import * as React from \"react\";\nimport { cva } from \"class-variance-authority\";\nimport { Slot } from \"@radix-ui/react-slot\";\n\nimport { cn } from \"@/lib/db-utils\";\n\nconst buttonVariants = cva(\n  // IMPORTANT: use !rounded-md so Bootstrap/theme can't override it\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap !rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50\",\n        secondary: \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\n        xs: \"h-6 gap-1 !rounded-md px-2 text-xs has-[>svg]:px-1.5 [&_svg:not([class*='size-'])]:size-3\",\n        sm: \"h-8 !rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\n        lg: \"h-10 !rounded-md px-6 has-[>svg]:px-4\",\n        icon: \"size-9\",\n        \"icon-xs\": \"size-6 !rounded-md [&_svg:not([class*='size-'])]:size-3\",\n        \"icon-sm\": \"size-8\",\n        \"icon-lg\": \"size-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n);\n\nfunction Button({ className, variant = \"default\", size = \"default\", asChild = false, ...props }) {\n  const Comp = asChild ? Slot : \"button\";\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      data-variant={variant}\n      data-size={size}\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  );\n}\n\nexport { Button, buttonVariants };"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,IAAA,uKAAG,EACxB,kEAAkE;AAClE,gcACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WAAW;YACX,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EAAE,SAAS,EAAE,UAAU,SAAS,EAAE,OAAO,SAAS,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO;IAC7F,MAAM,OAAO,UAAU,wKAAI,GAAG;IAE9B,qBACE,8OAAC;QACC,aAAU;QACV,gBAAc;QACd,aAAW;QACX,WAAW,IAAA,+HAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 352, "column": 0}, "map": {"version":3,"sources":["file:///Users/apcrat/Documents/react/church_suit_business/affiliates/src/components/ui/separator.jsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const Separator = registerClientReference(\n    function() { throw new Error(\"Attempted to call Separator() from the server but Separator is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/ui/separator.jsx <module evaluation>\",\n    \"Separator\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,YAAY,IAAA,wQAAuB,EAC5C;IAAa,MAAM,IAAI,MAAM;AAAkO,GAC/P,iEACA","ignoreList":[0]}},
    {"offset": {"line": 366, "column": 0}, "map": {"version":3,"sources":["file:///Users/apcrat/Documents/react/church_suit_business/affiliates/src/components/ui/separator.jsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const Separator = registerClientReference(\n    function() { throw new Error(\"Attempted to call Separator() from the server but Separator is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/ui/separator.jsx\",\n    \"Separator\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,YAAY,IAAA,wQAAuB,EAC5C;IAAa,MAAM,IAAI,MAAM;AAAkO,GAC/P,6CACA","ignoreList":[0]}},
    {"offset": {"line": 380, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 388, "column": 0}, "map": {"version":3,"sources":["file:///Users/apcrat/Documents/react/church_suit_business/affiliates/src/components/ui/badge.jsx"],"sourcesContent":["import * as React from \"react\";\nimport { cn } from \"@/lib/db-utils\";\n\nexport function Badge({ className, variant = \"default\", ...props }) {\n  return (\n    <span\n      className={cn(\n        \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold\",\n        variant === \"default\" && \"bg-primary text-primary-foreground border-transparent\",\n        variant === \"secondary\" && \"bg-secondary text-secondary-foreground\",\n        variant === \"outline\" && \"bg-background text-foreground\",\n        className\n      )}\n      {...props}\n    />\n  );\n}"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAEO,SAAS,MAAM,EAAE,SAAS,EAAE,UAAU,SAAS,EAAE,GAAG,OAAO;IAChE,qBACE,8OAAC;QACC,WAAW,IAAA,+HAAE,EACX,oFACA,YAAY,aAAa,yDACzB,YAAY,eAAe,0CAC3B,YAAY,aAAa,iCACzB;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 412, "column": 0}, "map": {"version":3,"sources":["file:///Users/apcrat/Documents/react/church_suit_business/affiliates/src/app/register/payment/%5Baffiliate_id%5D/success/page.js"],"sourcesContent":["import Link from \"next/link\";\n\nimport { money, formatDate } from \"@/lib/db-utils\";\nimport { cn } from \"@/lib/utils\";\n\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { Badge } from \"@/components/ui/badge\";\n\nexport const metadata = {\n  title: \"Payment Successful | Subscription Activated\",\n  description:\n    \"Your subscription payment was successful. Your affiliate account is now active and ready to use.\",\n  robots: { index: false, follow: false },\n};\n\nasync function getSuccessInfo(affiliate_id) {\n  const base = process.env.APP_URL || \"http://localhost:3000\";\n\n  const res = await fetch(\n    `${base}/api/affiliate/payment-intent?affiliate_id=${affiliate_id}`,\n    { cache: \"no-store\" }\n  );\n\n  const data = await res.json().catch(() => null);\n\n  if (!res.ok) {\n    return { error: data?.message || \"Could not load payment info\" };\n  }\n\n  return data;\n}\n\nfunction IconBadge({ tone = \"success\" }) {\n  const isSuccess = tone === \"success\";\n\n  return (\n    <div\n      className={cn(\n        \"flex h-12 w-12 items-center justify-center rounded-2xl border\",\n        isSuccess\n          ? \"border-emerald-200 bg-emerald-50 text-emerald-700\"\n          : \"border-red-200 bg-red-50 text-red-700\"\n      )}\n      aria-hidden=\"true\"\n    >\n      <i className={cn(\"fa-solid text-xl\", isSuccess ? \"fa-circle-check\" : \"fa-circle-xmark\")} />\n    </div>\n  );\n}\n\nfunction InfoRow({ label, value }) {\n  return (\n    <div className=\"space-y-1\">\n      <div className=\"text-xs font-medium text-muted-foreground\">{label}</div>\n      <div className=\"text-sm font-semibold break-words\">{value ?? \"-\"}</div>\n    </div>\n  );\n}\n\nexport default async function PaymentSuccessPage({ params, searchParams }) {\n  // ✅ params in Next.js can be a Promise sometimes\n  const { affiliate_id } = await params;\n\n  if (!affiliate_id) {\n    return (\n      <main className=\"mx-auto w-full max-w-4xl px-4 py-10\">\n        <Card className=\"rounded-2xl\">\n          <CardHeader>\n            <CardTitle>Invalid URL</CardTitle>\n            <CardDescription>Affiliate id is missing.</CardDescription>\n          </CardHeader>\n          <CardContent className=\"flex flex-wrap gap-2\">\n            <Button asChild>\n              <Link href=\"/\">Go Home</Link>\n            </Button>\n          </CardContent>\n        </Card>\n      </main>\n    );\n  }\n\n  // ✅ In App Router, searchParams is an object (no need await)\n  const redirectStatus = searchParams?.redirect_status; // \"succeeded\" | \"failed\"\n  let paymentIntent = searchParams?.payment_intent || \"\";\n\n  // If Stripe redirect says failed\n  if (redirectStatus && redirectStatus !== \"succeeded\") {\n    return (\n      <main className=\"mx-auto w-full max-w-4xl px-4 py-10\">\n        <Card className=\"rounded-2xl\">\n          <CardHeader className=\"space-y-4\">\n            <div className=\"flex items-start gap-4\">\n              <IconBadge tone=\"danger\" />\n              <div className=\"space-y-1\">\n                <CardTitle className=\"text-xl\">Payment not completed</CardTitle>\n                <CardDescription>\n                  Your payment did not go through. Please try again.\n                </CardDescription>\n              </div>\n            </div>\n          </CardHeader>\n\n          <CardContent className=\"space-y-4\">\n            <Separator />\n            <div className=\"flex flex-wrap gap-2\">\n              <Button asChild>\n                <Link href={`/register/payment/${affiliate_id}`}>Retry Payment</Link>\n              </Button>\n              <Button variant=\"outline\" asChild>\n                <Link href=\"/\">Go Home</Link>\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      </main>\n    );\n  }\n\n  const info = await getSuccessInfo(affiliate_id);\n\n  if (info?.error) {\n    return (\n      <main className=\"mx-auto w-full max-w-4xl px-4 py-10\">\n        <Card className=\"rounded-2xl\">\n          <CardHeader className=\"space-y-2\">\n            <CardTitle>Couldn’t load payment info</CardTitle>\n            <CardDescription>{info.error}</CardDescription>\n          </CardHeader>\n          <CardContent className=\"flex flex-wrap gap-2\">\n            <Button asChild>\n              <Link href={`/register/payment/${affiliate_id}`}>Retry Payment</Link>\n            </Button>\n            <Button variant=\"outline\" asChild>\n              <Link href=\"/\">Go Home</Link>\n            </Button>\n          </CardContent>\n        </Card>\n      </main>\n    );\n  }\n\n  const aff = info.affiliate;\n  const pay = info.latest_payment;\n\n  const start_date = formatDate(aff.start_date);\n  const end_date = formatDate(aff.end_date);\n\n  if (!paymentIntent) paymentIntent = aff?.stripe_payment_intent_id || \"\";\n\n  const storeName = aff?.store_name || aff?.business_name || `Affiliate #${aff?.affiliate_id || affiliate_id}`;\n\n  return (\n    <main className=\"mx-auto w-full max-w-5xl px-4 py-10\">\n      {/* Header */}\n      <div className=\"mb-6 flex items-start justify-between gap-4\">\n        <div className=\"flex items-start gap-4\">\n          <IconBadge tone=\"success\" />\n          <div className=\"space-y-1\">\n            <div className=\"flex flex-wrap items-center gap-2\">\n              <h1 className=\"text-2xl font-bold tracking-tight\">Payment Successful</h1>\n              <Badge className=\"rounded-full text-white\" variant=\"secondary\">\n                Subscription Active\n              </Badge>\n            </div>\n            <p className=\"text-sm text-muted-foreground\">\n              Your subscription is active now. You can access your dashboard and start using your account.\n            </p>\n          </div>\n        </div>\n\n        <div className=\"hidden md:flex items-center gap-2\">\n          <Button asChild>\n            <Link href=\"/account\" className=\"text-decoration-none text-white\">Go to Dashboard</Link>\n          </Button>\n          <Button variant=\"outline\" asChild>\n            <Link href=\"/\" className=\"text-decoration-none text-dark\">Back to Home</Link>\n          </Button>\n        </div>\n      </div>\n\n      {/* Body */}\n      <div className=\"grid gap-6 lg:grid-cols-[1.3fr_0.7fr]\">\n        {/* Details Card */}\n        <Card className=\"rounded-2xl\">\n          <CardHeader>\n            <CardTitle className=\"text-base\">Subscription Details</CardTitle>\n            <CardDescription>\n              Confirm your store, billing period, and payment reference.\n            </CardDescription>\n          </CardHeader>\n\n          <CardContent className=\"space-y-5\">\n            <div className=\"rounded-2xl border bg-muted/30 p-4\">\n              <div className=\"grid gap-4 sm:grid-cols-2\">\n                <InfoRow label=\"Store\" value={storeName} />\n                <InfoRow label=\"Email\" value={aff?.email || \"-\"} />\n                <InfoRow label=\"Amount\" value={pay ? money(pay.amount) : \"-\"} />\n                <InfoRow label=\"Invoice\" value={pay?.invoice_number || \"-\"} />\n                <InfoRow\n                  label=\"Billing Period\"\n                  value={\n                    pay?.start_date\n                      ? `${String(start_date)} → ${String(end_date)}`\n                      : \"-\"\n                  }\n                />\n                <InfoRow label=\"Payment Intent\" value={paymentIntent || \"-\"} />\n              </div>\n            </div>\n\n            <div className=\"flex flex-wrap gap-2 md:hidden\">\n              <Button className=\"w-full sm:w-auto\" asChild>\n                <Link href=\"/account\">Go to Dashboard</Link>\n              </Button>\n              <Button className=\"w-full sm:w-auto\" variant=\"outline\" asChild>\n                <Link href=\"/\">Back to Home</Link>\n              </Button>\n            </div>\n\n            <p className=\"text-xs text-muted-foreground\">\n              Need help? Contact support.\n            </p>\n          </CardContent>\n        </Card>\n\n        {/* Next steps card */}\n        <Card className=\"rounded-2xl\">\n          <CardHeader>\n            <CardTitle className=\"text-base\">Next Steps</CardTitle>\n            <CardDescription>Recommended actions after activation.</CardDescription>\n          </CardHeader>\n\n          <CardContent className=\"space-y-4\">\n            <div className=\"rounded-2xl border p-4\">\n              <div className=\"text-sm font-semibold\">1) Login & open dashboard</div>\n              <p className=\"mt-1 text-sm text-muted-foreground\">\n                Manage your store settings and start your onboarding.\n              </p>\n            </div>\n\n            <div className=\"rounded-2xl border p-4\">\n              <div className=\"text-sm font-semibold\">2) Verify your details</div>\n              <p className=\"mt-1 text-sm text-muted-foreground\">\n                Confirm email, phone, and store name for billing and notifications.\n              </p>\n            </div>\n\n            <Separator />\n\n            <Button className=\"w-full\" asChild>\n              <Link href=\"/account\" className=\"text-white text-decoration-none\">Continue to Dashboard</Link>\n            </Button>\n            <Button className=\"w-full\" variant=\"outline\" asChild>\n              <Link href=\"/\" className=\"text-decoration-none text-dark\">Return to Home</Link>\n            </Button>\n          </CardContent>\n        </Card>\n      </div>\n    </main>\n  );\n}"],"names":[],"mappings":"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"}}]
}