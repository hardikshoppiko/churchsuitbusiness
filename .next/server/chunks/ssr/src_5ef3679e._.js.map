{"version":3,"sources":["../../../../src/components/ui/card.jsx","../../../../src/app/account/login/LoginForm.js"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/db-utils\";\n\nfunction Card({\n  className,\n  ...props\n}) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm\",\n        className\n      )}\n      {...props} />\n  );\n}\n\nfunction CardHeader({\n  className,\n  ...props\n}) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\n        className\n      )}\n      {...props} />\n  );\n}\n\nfunction CardTitle({\n  className,\n  ...props\n}) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn(\"leading-none font-semibold\", className)}\n      {...props} />\n  );\n}\n\nfunction CardDescription({\n  className,\n  ...props\n}) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props} />\n  );\n}\n\nfunction CardAction({\n  className,\n  ...props\n}) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\n        className\n      )}\n      {...props} />\n  );\n}\n\nfunction CardContent({\n  className,\n  ...props\n}) {\n  return (<div data-slot=\"card-content\" className={cn(\"px-6\", className)} {...props} />);\n}\n\nfunction CardFooter({\n  className,\n  ...props\n}) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\n      {...props} />\n  );\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n","\"use client\";\n\nimport Link from \"next/link\";\nimport { useRouter, useSearchParams } from \"next/navigation\";\nimport { useMemo, useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\n\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Card } from \"@/components/ui/card\";\n\nfunction isValidLogin(v) {\n  const s = String(v || \"\").trim();\n  if (!s) return false;\n\n  const isEmail = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]{2,}$/.test(s);\n  const digits = s.replace(/\\D/g, \"\");\n  const isPhone = /^\\d{10,15}$/.test(digits);\n  return isEmail || isPhone;\n}\n\nexport default function LoginForm() {\n  const router = useRouter();\n  const searchParams = useSearchParams();\n\n  const redirect = useMemo(() => searchParams.get(\"redirect\") || \"/account\", [searchParams]);\n\n  const [serverErr, setServerErr] = useState(\"\");\n  const [serverMsg, setServerMsg] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n  } = useForm({\n    defaultValues: {\n      username: \"\",\n      password: \"\",\n      remember: true,\n    },\n  });\n\n  async function onSubmit(values) {\n    setServerErr(\"\");\n    setServerMsg(\"\");\n    setLoading(true);\n\n    try {\n      const res = await fetch(`/api/account/login`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        cache: \"no-store\",\n        credentials: \"include\",\n        body: JSON.stringify({\n          username: String(values.username || \"\").trim(),\n          password: String(values.password || \"\"),\n          remember: !!values.remember,\n        }),\n      });\n\n      const data = await res.json().catch(() => ({}));\n\n      if (!res.ok) {\n        setServerErr(data?.message || \"Login failed. Please try again.\");\n        return;\n      }\n\n      setServerMsg(\"Login successful. Redirecting...\");\n      router.push(redirect);\n    } catch {\n      setServerErr(\"Login failed. Please try again.\");\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  return (\n    <Card className=\"w-full max-w-5xl overflow-hidden rounded-2xl border bg-background shadow-sm py-0\">\n      <div className=\"grid min-h-[560px] grid-cols-1 md:grid-cols-2\">\n        {/* LEFT */}\n        <div className=\"flex items-center\">\n          <div className=\"w-full p-6 sm:p-10\">\n            <div className=\"mb-7 text-center md:text-left\">\n              <h1 className=\"text-3xl font-bold tracking-tight\">Sign in</h1>\n              <p className=\"mt-2 text-sm text-muted-foreground\">\n                Login to manage your affiliate store and subscription.\n              </p>\n            </div>\n\n            {serverErr ? (\n              <div className=\"mb-5 rounded-xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700\">\n                <div className=\"font-semibold\">Login failed</div>\n                <div>{serverErr}</div>\n              </div>\n            ) : null}\n\n            {serverMsg ? (\n              <div className=\"mb-5 rounded-xl border border-emerald-200 bg-emerald-50 px-4 py-3 text-sm text-emerald-700\">\n                <div className=\"font-semibold\">Success</div>\n                <div>{serverMsg}</div>\n              </div>\n            ) : null}\n\n            <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-5\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"username\">Email or Mobile</Label>\n                <Input\n                  id=\"username\"\n                  placeholder=\"you@example.com or 10-digit mobile\"\n                  autoComplete=\"username\"\n                  {...register(\"username\", {\n                    required: \"Email or Mobile is required\",\n                    validate: (v) => isValidLogin(v) || \"Enter a valid email or mobile number\",\n                  })}\n                  className={errors.username ? \"border-red-500 focus-visible:ring-red-500/30\" : \"\"}\n                />\n                {errors.username ? (\n                  <p className=\"text-sm text-red-600\">{errors.username.message}</p>\n                ) : null}\n              </div>\n\n              <div className=\"space-y-2\">\n                <div className=\"flex items-center justify-between gap-3\">\n                  <Label htmlFor=\"password\">Password</Label>\n                  <Link\n                    href=\"/account/forgot-password\"\n                    className=\"text-sm text-muted-foreground text-decoration-none hover:text-foreground\"\n                  >\n                    Forgot password?\n                  </Link>\n                </div>\n\n                <Input\n                  id=\"password\"\n                  type=\"password\"\n                  placeholder=\"Enter your password\"\n                  autoComplete=\"current-password\"\n                  {...register(\"password\", {\n                    required: \"Password is required\",\n                    minLength: { value: 6, message: \"Minimum 6 characters\" },\n                    maxLength: { value: 50, message: \"Maximum 50 characters\" },\n                  })}\n                  className={errors.password ? \"border-red-500 focus-visible:ring-red-500/30\" : \"\"}\n                />\n                {errors.password ? (\n                  <p className=\"text-sm text-red-600\">{errors.password.message}</p>\n                ) : null}\n              </div>\n\n              <div className=\"flex items-center justify-between gap-3\">\n                <label className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n                  <input type=\"checkbox\" className=\"h-4 w-4 rounded border-input me-1\" {...register(\"remember\")} />\n                  Remember me\n                </label>\n                <span className=\"text-xs text-muted-foreground\">Secure login</span>\n              </div>\n\n              <Button className=\"w-full mb-3\" type=\"submit\" disabled={loading}>\n                {loading ? \"Signing in...\" : \"Sign In\"}\n              </Button>\n\n              <div className=\"flex items-center gap-3 pt-1\">\n                <div className=\"h-px flex-1 bg-border\" />\n                <div className=\"text-xs text-muted-foreground\">New here?</div>\n                <div className=\"h-px flex-1 bg-border\" />\n              </div>\n\n              <Button variant=\"outline\" className=\"w-full\" asChild>\n                <Link href=\"/register\" className=\"text-decoration-none text-dark\">Create an account</Link>\n              </Button>\n            </form>\n          </div>\n        </div>\n\n        {/* RIGHT (THIS IS NOW A TRUE CARD-HALF PANEL) */}\n        <div className=\"relative hidden md:flex\">\n          {/* background fills the entire half */}\n          <div className=\"absolute inset-0 bg-gradient-to-br from-[#0B2B7A] via-[#225ED7] to-[#4F8BFF]\" />\n\n          {/* soft glows */}\n          <div className=\"absolute inset-0 opacity-40\">\n            <div className=\"absolute -top-28 -right-28 h-96 w-96 rounded-full bg-white/20 blur-3xl\" />\n            <div className=\"absolute -bottom-28 -left-28 h-96 w-96 rounded-full bg-white/15 blur-3xl\" />\n          </div>\n\n          {/* content (padding only here, NOT on container) */}\n          <div className=\"relative z-10 flex w-full flex-col justify-between p-10 text-white\">\n            <div className=\"space-y-4\">\n              <div className=\"inline-flex w-fit items-center gap-2 rounded-full bg-white/15 px-3 py-1 text-xs font-semibold\">\n                Church Suit Business\n              </div>\n\n              <div className=\"space-y-2\">\n                <h2 className=\"text-4xl font-bold leading-tight\">Welcome back.</h2>\n                <p className=\"max-w-sm text-white/85\">\n                  Manage your store, subscription, and orders in one place.\n                </p>\n              </div>\n            </div>\n\n            <div className=\"space-y-5\">\n              <div className=\"rounded-2xl border border-white/20 bg-white/10 p-5 backdrop-blur\">\n                <div className=\"text-sm font-semibold\">Why sign in?</div>\n                <ul className=\"mt-3 space-y-2 text-sm text-white/90\">\n                  <li className=\"flex gap-2\">\n                    <span className=\"mt-[6px] h-1.5 w-1.5 rounded-full bg-white/90\" />\n                    View your affiliate dashboard\n                  </li>\n                  <li className=\"flex gap-2\">\n                    <span className=\"mt-[6px] h-1.5 w-1.5 rounded-full bg-white/90\" />\n                    Manage billing & subscription\n                  </li>\n                  <li className=\"flex gap-2\">\n                    <span className=\"mt-[6px] h-1.5 w-1.5 rounded-full bg-white/90\" />\n                    Track your store progress\n                  </li>\n                </ul>\n              </div>\n\n              <div className=\"text-xs text-white/80\">\n                By continuing, you agree to our Terms &amp; Privacy Policy.\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </Card>\n  );\n}"],"names":[],"mappings":"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"}