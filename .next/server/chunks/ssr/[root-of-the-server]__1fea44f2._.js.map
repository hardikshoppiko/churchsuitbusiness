{"version":3,"sources":["../../../../src/lib/affiliate.js","../../../../src/app/register/RegisterWizardForm.js/__nextjs-internal-proxy.mjs","../../../../src/app/register/page.js","../../../../src/lib/geo.js"],"sourcesContent":["import { db } from \"@/lib/db\";\nimport { dbEscape } from \"./db-utils\";\n\nfunction toNumber(v, fallback = 0) {\n  if (v === null || v === undefined || v === \"\") return fallback;\n  const n = Number(v);\n  return Number.isFinite(n) ? n : fallback;\n}\n\nexport async function getAffiliatePlans() {\n  const [rows] = await db.query(`\n    SELECT\n      affiliate_plan_id,\n      name,\n      tag_line,\n      fees,\n      stripe_plan_id,\n      discount_type,\n      discount,\n      shipping,\n      sort_order,\n      status,\n      price_schema,\n      default_markup,\n      retail_price_commission,\n      is_markup_required,\n      is_catalog_access,\n      date_added,\n      date_modified,\n      user_added,\n      user_modified,\n      is_delete\n    FROM affiliate_plan\n    WHERE status = 1 AND is_delete = 0\n    ORDER BY sort_order ASC, fees ASC\n  `);\n\n  // Return full plan object (future-safe)\n  return rows.map((r) => ({\n    affiliate_plan_id: toNumber(r.affiliate_plan_id),\n    name: r.name || \"\",\n    tag_line: r.tag_line || \"\",\n\n    fees: toNumber(r.fees),\n    shipping: toNumber(r.shipping),\n\n    // Discount rules\n    discount_type: r.discount_type || \"\", // e.g. \"P\" or \"F\" (you decide)\n    discount: toNumber(r.discount),\n\n    // Stripe\n    stripe_plan_id: r.stripe_plan_id || \"\",\n\n    // Pricing rules\n    price_schema: toNumber(r.price_schema), // tinyint\n    default_markup: toNumber(r.default_markup),\n    retail_price_commission: toNumber(r.retail_price_commission),\n    is_markup_required: toNumber(r.is_markup_required), // tinyint 0/1\n    is_catalog_access: toNumber(r.is_catalog_access),   // tinyint 0/1\n\n    // Meta\n    sort_order: toNumber(r.sort_order),\n    status: toNumber(r.status),\n    is_delete: toNumber(r.is_delete),\n    date_added: r.date_added,\n    date_modified: r.date_modified,\n    user_added: toNumber(r.user_added),\n    user_modified: toNumber(r.user_modified),\n  }));\n}\n\nexport async function getAffiliate(affiliateId) {\n  const [rows] = await db.query(`SELECT a.*, z.name AS state_name, c.name AS country_name, s.name AS affiliate_status FROM affiliate a LEFT JOIN zone z ON(a.zone_id = z.zone_id) LEFT JOIN country c ON(a.country_id = c.country_id) LEFT JOIN affiliate_status s ON(s.affiliate_status_id = a.affiliate_status_id) WHERE a.affiliate_id = ? AND a.is_delete = 0`, [affiliateId]);\n\n  if (rows.length === 0) return null;\n\n  const r = rows[0];\n\n  return {\n    affiliate_id: toNumber(r.affiliate_id),\n    affiliate_type: toNumber(r.affiliate_type),\n    fees: toNumber(r.fees),\n    store_name: dbEscape(r.store_name) || \"\",\n    firstname: dbEscape(r.firstname) || \"\",\n    lastname: dbEscape(r.lastname) || \"\",\n    email: dbEscape(r.email) || \"\",\n    telephone: dbEscape(r.telephone) || \"\",\n    website: dbEscape(r.website) || \"\",\n    address_1: dbEscape(r.address_1) || \"\",\n    address_2: dbEscape(r.address_2) || \"\",\n    city: dbEscape(r.city) || \"\",\n    postcode: dbEscape(r.postcode) || \"\",\n    country_id: toNumber(r.country_id) || 0,\n    country_name: dbEscape(r.country_name) || \"\",\n    zone_id: toNumber(r.zone_id) || 0,\n    zone_name: dbEscape(r.state_name) || \"\",\n    is_customer_own_domain: toNumber(r.is_customer_own_domain) || 0,\n    is_domain_available: toNumber(r.is_domain_available) || 0,\n    stripe_token: dbEscape(r.stripe_token) || \"\",\n    stripe_customer_id: dbEscape(r.stripe_customer_id) || \"\",\n    stripe_plan_id: dbEscape(r.stripe_plan_id) || \"\",\n    recurring_billing: toNumber(r.recurring_billing) || 0,\n    recurring_billing_id: dbEscape(r.recurring_billing_id) || \"\",\n    stripe_payment_intent_id: dbEscape(r.stripe_payment_intent_id) || \"\",\n    start_date: dbEscape(r.start_date) || \"\",\n    end_date: dbEscape(r.end_date) || \"\",\n    affiliate_status_id: toNumber(r.affiliate_status_id) || 0,\n    affiliate_status: dbEscape(r.affiliate_status) || \"\",\n    date_added: dbEscape(r.date_added) || \"\",\n    date_modified: dbEscape(r.date_modified) || \"\",\n  };\n}","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/register/RegisterWizardForm.js from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/register/RegisterWizardForm.js\",\n    \"default\",\n);\n","import RegisterWizardForm from \"./RegisterWizardForm\";\nimport { getAffiliatePlans } from \"@/lib/affiliate\";\nimport { getCountries } from \"@/lib/geo\";\nimport { getSiteSettings } from \"@/lib/settings\";\n\nexport const metadata = {\n  title: \"Affiliate Website Program, Start Selling Church Suits Online\",\n  description:\n    \"Website Affiliate Program at Ladies Church Suits,Earn money by selling church attire,wholesale church suits,Free Website Program,Buid your website in free\",\n};\n\nexport default async function RegisterPage() {\n  const [plans, countries, settings] = await Promise.all([\n    getAffiliatePlans(),\n    getCountries(),\n    getSiteSettings(0),\n  ]);\n\n  const defaultCountryId = Number(settings?.config?.config_country_id || 0) || 0;\n  const defaultZoneId = Number(settings?.config?.config_zone_id || 0) || 0;\n\n  return (\n    <main className=\"mx-auto w-full max-w-6xl px-4 py-8 lg:py-12\">\n      {/* Premium Header */}\n      <div className=\"relative overflow-hidden rounded-3xl border bg-background p-6 shadow-sm lg:p-10\">\n        <div className=\"pointer-events-none absolute inset-0 opacity-60 [mask-image:radial-gradient(ellipse_at_top,black,transparent_65%)]\">\n          <div className=\"absolute -left-28 -top-28 h-72 w-72 rounded-full bg-primary/20 blur-3xl\" />\n          <div className=\"absolute -right-28 -top-28 h-72 w-72 rounded-full bg-blue-500/10 blur-3xl\" />\n        </div>\n\n        <div className=\"relative\">\n          <div className=\"inline-flex items-center gap-2 rounded-full border bg-muted/40 px-3 py-1 text-xs font-semibold text-muted-foreground\">\n            <span className=\"h-2 w-2 rounded-full bg-primary\" />\n            3-step quick registration\n          </div>\n\n          <h1 className=\"mt-3 text-2xl font-bold tracking-tight sm:text-3xl\">\n            New Affiliate / Dropshipping Registration\n          </h1>\n\n          <p className=\"mt-2 max-w-2xl text-sm text-muted-foreground sm:text-base\">\n            Complete the registration in 3 simple steps to create your store and\n            start selling online.\n          </p>\n\n          {/* Small stats row */}\n          <div className=\"mt-6 grid gap-3 sm:grid-cols-3\">\n            <div className=\"rounded-2xl border bg-muted/30 p-4\">\n              <div className=\"text-xs font-semibold text-muted-foreground\">Step 1</div>\n              <div className=\"mt-1 font-semibold\">Personal Info</div>\n              <div className=\"text-sm text-muted-foreground\">Basic details</div>\n            </div>\n\n            <div className=\"rounded-2xl border bg-muted/30 p-4\">\n              <div className=\"text-xs font-semibold text-muted-foreground\">Step 2</div>\n              <div className=\"mt-1 font-semibold\">Plan & Domain</div>\n              <div className=\"text-sm text-muted-foreground\">Select plan + website</div>\n            </div>\n\n            <div className=\"rounded-2xl border bg-muted/30 p-4\">\n              <div className=\"text-xs font-semibold text-muted-foreground\">Step 3</div>\n              <div className=\"mt-1 font-semibold\">Address & Password</div>\n              <div className=\"text-sm text-muted-foreground\">Finish & pay</div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Wizard */}\n      <div className=\"mt-6 lg:mt-8\">\n        <RegisterWizardForm\n          plans={plans}\n          countries={countries}\n          defaultCountryId={defaultCountryId}\n          defaultZoneId={defaultZoneId}\n        />\n      </div>\n    </main>\n  );\n}","import { db } from \"@/lib/db\";\n\nexport async function getCountries() {\n  const [rows] = await db.query(\n    \"SELECT country_id, name FROM country ORDER BY name ASC\"\n  );\n\n  return rows.map((r) => ({\n    country_id: Number(r.country_id),\n    name: r.name,\n  }));\n}\n\nexport async function getZonesByCountryId(country_id) {\n  const [rows] = await db.query(\n    \"SELECT zone_id, country_id, name FROM zone WHERE country_id = ? ORDER BY name ASC\",\n    [Number(country_id)]\n  );\n\n  return rows.map((r) => ({\n    zone_id: Number(r.zone_id),\n    country_id: Number(r.country_id),\n    name: r.name,\n  }));\n}"],"names":[],"mappings":"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","ignoreList":[1]}