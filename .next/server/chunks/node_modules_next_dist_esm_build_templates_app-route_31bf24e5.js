module.exports=[39887,e=>{"use strict";var t=e.i(47909),a=e.i(74017),i=e.i(96250),s=e.i(59756),r=e.i(61916),o=e.i(74677),n=e.i(69741),d=e.i(16795),l=e.i(87718),_=e.i(95169),f=e.i(47587),u=e.i(66012),c=e.i(70101),p=e.i(26937),m=e.i(10372),g=e.i(93695);e.i(52474);var b=e.i(220),h=e.i(79058),E=e.i(38369);async function w(e,t,a,i,s=120){let r,o=Number(e||0);if(!o)return;let n=String(t||"").trim();if(!n)return;let d=a??{},l=(r=function(e){if(!e||"object"!=typeof e)return JSON.stringify(e??{});let t={};for(let a of Object.keys(e).sort())t[a]=e[a];return JSON.stringify(t)}(d),crypto.createHash("sha1").update(r).digest("hex")),[_]=await h.db.query(`
    SELECT activity_id, data, date_added
    FROM affiliate_activity
    WHERE affiliate_id='${o}'
      AND \`key\`='${(0,E.dbEscape)(n)}'
    ORDER BY activity_id DESC
    LIMIT 1
  `);if(_?.length){let e=_[0],t="";try{let a=JSON.parse(String(e.data||"{}"));t=a?._hash||""}catch{}let[a]=await h.db.query(`
      SELECT (TIMESTAMPDIFF(SECOND, '${(0,E.dbEscape)(e.date_added)}', NOW())) AS diff_sec
    `),i=Number(a?.[0]?.diff_sec||999999);if(t===l&&i<=s)return void await h.db.query(`
        UPDATE affiliate SET date_update=NOW()
        WHERE affiliate_id='${o}'
        LIMIT 1
      `)}let f={...d,_hash:l};await h.db.query(`
    INSERT INTO affiliate_activity SET
      affiliate_id='${o}',
      \`key\`='${(0,E.dbEscape)(n)}',
      \`data\`='${(0,E.dbEscape)(JSON.stringify(f))}',
      ip='${(0,E.dbEscape)(i||"")}',
      date_added=NOW()
  `),await h.db.query(`
    UPDATE affiliate SET date_update=NOW()
    WHERE affiliate_id='${o}'
    LIMIT 1
  `)}async function y(e,t,a){let i=`
    INSERT INTO affiliate_extension SET
      affiliate_id='${Number(a)}',
      \`type\`='${(0,E.dbEscape)(e)}',
      \`code\`='${(0,E.dbEscape)(t)}'
  `,[s]=await h.db.query(i);return s.insertId}async function R(e,t,a=0){for(let[i,s]of(await h.db.query(`
    DELETE FROM affiliate_setting
    WHERE affiliate_id='${Number(a)}'
      AND \`code\`='${(0,E.dbEscape)(e)}'
  `),Object.entries(t||{})))if(String(i).startsWith(e))if(null==s||"object"!=typeof s)await h.db.query(`
        INSERT INTO affiliate_setting SET
          affiliate_id='${Number(a)}',
          \`code\`='${(0,E.dbEscape)(e)}',
          \`key\`='${(0,E.dbEscape)(i)}',
          \`value\`='${(0,E.dbEscape)(s)}',
          serialized='0'
      `);else{let t=(0,E.ocSerialize)(s);await h.db.query(`
        INSERT INTO affiliate_setting SET
          affiliate_id='${Number(a)}',
          \`code\`='${(0,E.dbEscape)(e)}',
          \`key\`='${(0,E.dbEscape)(i)}',
          \`value\`='${(0,E.dbEscape)(t)}',
          serialized='1'
      `)}}async function $(){let[e]=await h.db.query("SELECT `key`, `value` FROM affiliate_basic_setting WHERE `code`='affiliate_basic'");if(!e||0===e.length)return{};let t={};for(let a of e)t[a.key]=a.value;return t}async function N(e){let t=[];for(let a=0;a<2;a++){let i=`Category ${a+1}`,s=`
      INSERT INTO category SET
      category_old_id=0,
      category_child_old_id=0,
      affiliate_id='${Number(e)}',
      name='${(0,E.dbEscape)(i)}',
      name_affiliate='',
      description='Category',
      meta_title='Category',
      meta_description='Category',
      meta_keyword='Category',
      shopify_tag='',
      export_product_to_shopify=0,
      is_shopify_product_update_forcefully=0,
      dcs_brief='',
      dcs_detail='',
      dcs_short='',
      is_description_mobile=0,
      is_not_for_wholesale=0,
      is_not_for_affiliate=0,
      image='',
      image_path='',
      image_affiliate='',
      folder_name='',
      parent_id=0,
      top=1,
      is_catalog=0,
      is_special=0,
      is_women=0,
      is_men=0,
      is_accessories=0,
      \`column\`=0,
      sort_order='${a+1}',
      status=1,
      date_added=NOW(),
      date_modified=NOW()
    `,[r]=await h.db.query(s),o=r.insertId;t.push(o),await h.db.query(`
      INSERT INTO category_path SET
        category_id='${Number(o)}',
        path_id='${Number(o)}',
        level='0'
    `)}return t}async function T(e,t=[]){let a=[];for(let i=0;i<4;i++){let s=`Product ${i+1}`,r=`
      INSERT INTO product SET
        product_old_id=0,
        affiliate_id='${Number(e)}',
        name='${(0,E.dbEscape)(s)}',
        description='${(0,E.dbEscape)(s)}',
        meta_title='${(0,E.dbEscape)(s)}',
        meta_description='${(0,E.dbEscape)(s)}',
        meta_keyword='${(0,E.dbEscape)(s)}',
        model='',
        sku='',
        upc='',
        ean='',
        jan='',
        isbn='',
        mpn='',
        location='',
        quantity='1000',
        stock_status_id=0,
        image='affiliate_images/demo-product.jpg',
        image_path='',
        file_name='',
        is_large_image_found=0,
        is_image_background_is_white=0,
        video='',
        manufacturer_id=0,
        brand_id=0,
        shipping=1,
        price='100',
        price_retail='125',
        price_original='150',
        is_men=0,
        points=0,
        tax_class_id=0,
        date_available=NOW(),
        weight='0.000',
        weight_class_id=0,
        length='0.000',
        width='0.000',
        height='0.000',
        length_class_id=0,
        subtract=0,
        minimum='1',
        sort_order='${i+1}',
        status='1',
        viewed=0,
        is_product_modified=0,
        is_web_scrape_product_verify=0,
        date_added=NOW(),
        date_modified=NOW()
    `,[o]=await h.db.query(r),n=o.insertId;if(a.push(n),t&&t.length)for(let e of t)await h.db.query(`
          INSERT INTO product_to_category SET
            product_id='${Number(n)}',
            category_id='${Number(e)}'
        `)}return a}async function S(e,t=[]){for(let a of t){let t=`
      INSERT INTO information SET
        affiliate_id='${Number(e)}',
        title='${(0,E.dbEscape)(a.name)}',
        description='${(0,E.dbEscape)(a.description)}',
        description_top='',
        short='',
        meta_title='${(0,E.dbEscape)(a.meta_title)}',
        meta_description='${(0,E.dbEscape)(a.meta_description)}',
        meta_keyword='',
        image='',
        image_mobile='',
        top='0',
        bottom='1',
        affiliate=0,
        catalog='',
        trending_product_title='',
        trending_product_status=0,
        trending_categories='',
        sort_order='${Number(a.sort_order||0)}',
        status='${Number(a.status||0)}'
    `;await h.db.query(t)}}async function O(e){let t={code:"slideshow",module_name:"Home Page Slideshow",width:"1900",height:"700",sort_order:"1",status:"1",slideshow_images:[{title:"First",link:"index.php?route=product/catalog",image:"catalog/banner/1.jpg",sort_order:1},{title:"Second",link:"index.php?route=product/catalog",image:"catalog/banner/2.jpg",sort_order:2}]},a=(0,E.ocSerialize)(t),i=`
    INSERT INTO page_builder SET
      affiliate_id='${Number(e)}',
      page_id=0,
      module_name='${(0,E.dbEscape)(t.module_name)}',
      \`code\`='${(0,E.dbEscape)(t.code)}',
      \`setting\`='${(0,E.dbEscape)(a)}',
      location_type=0,
      sort_order='${Number(t.sort_order)}',
      status='${Number(t.status)}',
      date_added=NOW(),
      date_modified=NOW(),
      user_added=0,
      user_modified=0,
      is_delete=0
  `;await h.db.query(i)}async function v(e){let t={code:"banner",module_name:"Home Page Banners",width:"380",height:"270",sort_order:"2",status:"1",banner_images:[{title:"Womens",link:"index.php?route=product/womens",image:"catalog/banner-small/1.jpg",sort_order:1},{title:"Mens",link:"index.php?route=product/mens",image:"catalog/banner-small/2.jpg",sort_order:2},{title:"Accessories",link:"index.php?route=product/accessories",image:"catalog/banner-small/3.jpg",sort_order:3}]},a=(0,E.ocSerialize)(t),i=`
    INSERT INTO page_builder SET
      affiliate_id='${Number(e)}',
      page_id=0,
      module_name='${(0,E.dbEscape)(t.module_name)}',
      \`code\`='${(0,E.dbEscape)(t.code)}',
      \`setting\`='${(0,E.dbEscape)(a)}',
      location_type=0,
      sort_order='${Number(t.sort_order)}',
      status='${Number(t.status)}',
      date_added=NOW(),
      date_modified=NOW(),
      user_added=0,
      user_modified=0,
      is_delete=0
  `;await h.db.query(i)}async function I(e){let t=`
    SELECT category_id
    FROM category
    WHERE parent_id='${Number(e)}' AND status=1
    ORDER BY sort_order ASC, category_id ASC
  `,[a]=await h.db.query(t);return(a||[]).map(e=>Number(e.category_id))}function C(e=[]){if(!e.length)return null;let t=Math.floor(Math.random()*e.length);return e[t]}async function A(e){let t=await I(1),a=await I(434),i=await I(493),s=C(t),r=C(a),o=C(i),n={code:"category_product_module",module_name:"Latest Category Products",category:"",categories:[],limit:4,width:200,height:200,sort_order:3,status:1};s&&n.categories.push(s),r&&n.categories.push(r),o&&n.categories.push(o);let d=(0,E.ocSerialize)(n),l=`
    INSERT INTO page_builder SET
      affiliate_id='${Number(e)}',
      page_id=0,
      module_name='${(0,E.dbEscape)(n.module_name)}',
      \`code\`='${(0,E.dbEscape)(n.code)}',
      \`setting\`='${(0,E.dbEscape)(d)}',
      location_type=0,
      sort_order='${Number(n.sort_order)}',
      status='${Number(n.status)}',
      date_added=NOW(),
      date_modified=NOW(),
      user_added=0,
      user_modified=0,
      is_delete=0
  `;await h.db.query(l)}async function q(e){let t=Number(e);if(!t)return null;let[a]=await h.db.query(`SELECT * FROM affiliate WHERE affiliate_id=${t} LIMIT 1`);return a?.[0]||null}async function j(e){let t={},a=String(e||"").trim().replace(/^https?:\/\//i,"").replace(/^www\./i,"");if(!/^[a-z0-9.-]+\.[a-z]{2,}$/i.test(a))return t.error="Warning: Please enter valid URL!",t;let i=process.env.GODADDY_API_KEY,s=process.env.GODADDY_API_SECRET,r=process.env.GODADDY_BASE_URL||"https://api.godaddy.com";if(!i||!s)return t.error="GoDaddy API credentials missing",t;let o={Authorization:`sso-key ${i}:${s}`,"Content-Type":"application/json"},n=`${r}/v1/domains/available?domain=${encodeURIComponent(a)}&checkType=FAST&forTransfer=false`,d=await fetch(n,{method:"GET",headers:o,cache:"no-store"}),l=await d.json().catch(()=>({}));if(l?.code==="ACCESS_DENIED")return t.error="GoDaddy ACCESS_DENIED",t;if(l?.available===!0)return t.success=!0,t.domain_found="Congratulation, domain available!",t;t.error="Warning: Domain not available!",t.domain_not_available=!0;let _=a.replace(/^www\./i,""),f=_.split(".")[0]||_,u=`${r}/v1/domains/suggest?query=${encodeURIComponent(f)}&sources=keywordspin&waitMs=1000`,c=await fetch(u,{method:"GET",headers:o,cache:"no-store"}),p=await c.json().catch(()=>[]);if(Array.isArray(p)&&p.length>0){let e=[];for(let t of p){let a=t?.domain;"string"==typeof a&&a.toLowerCase().endsWith(".com")&&e.push(a)}e.length&&(t.domain_suggestions=e)}return t}async function x(e){let t=await e.json().catch(()=>({}));if("check_domain"===String(t?.action||"")){let e=t?.domain_name||"",a=await j(e);return Response.json(a)}let a=Number(t.step||0);if(![1,2,3].includes(a))return Response.json({message:"step is required (1,2,3)"},{status:400});let i=(0,E.getClientIp)(e);if(1===a){let e=(0,E.dbEscape)(t.firstname),a=(0,E.dbEscape)(t.lastname),s=(0,E.dbEscape)(t.email).toLowerCase(),r=(0,E.dbEscape)(t.telephone),o=Number(t?.affiliate_id||0)||0;if(!e)return Response.json({message:"firstname is required"},{status:400});if(e.length<1||e.length>32)return Response.json({message:"First name must be between 1 to 32 characters"},{status:400});if(!a)return Response.json({message:"lastname is required"},{status:400});if(a.length<1||a.length>32)return Response.json({message:"Last name must be between 1 to 32 characters"},{status:400});if(!s)return Response.json({message:"email is required"},{status:400});if(!(0,E.isEmail)(s))return Response.json({message:"Please enter a valid email address"},{status:400});if(!r)return Response.json({message:"telephone is required"},{status:400});if(!(0,E.isTenDigitPhone)(r))return Response.json({message:"Phone/Mobile must be exactly 10 digits (numbers only)"},{status:400});let n=o?`AND affiliate_id <> ${o}`:"",[d]=await h.db.query(`
      SELECT affiliate_id
      FROM affiliate
      WHERE LOWER(email)=LOWER('${(0,E.dbEscape)(s)}')
      ${n}
      LIMIT 1
    `);if(d?.length)return Response.json({message:"Email already exists"},{status:409});let[l]=await h.db.query(`
      SELECT affiliate_id
      FROM affiliate
      WHERE telephone='${(0,E.dbEscape)(r)}'
      ${n}
      LIMIT 1
    `);if(l?.length)return Response.json({message:"Phone/Mobile already exists"},{status:409});if(o&&await q(o))return await h.db.query(`
          UPDATE affiliate SET
            firstname='${e}',
            lastname='${a}',
            email='${s}',
            telephone='${r}',
            ip='${(0,E.dbEscape)(i)}',
            date_modified=NOW()
          WHERE affiliate_id=${o}
          LIMIT 1
        `),await w(g,"register_step1_submit",{step:1,firstname:t.firstname,lastname:t.lastname,email:t.email,telephone:t.telephone},i,120),Response.json({success:!0,step:1,affiliate_id:o,mode:"updated"});let _=`TEMP-${Date.now()}`,f=(0,E.generateSalt)(),u=`tmp-${Date.now()}-${Math.random().toString(16).slice(2)}`,c=(0,E.ocHashPassword)(u,f),p=`
      INSERT INTO affiliate SET
        affiliate_type='0',
        fees='0',
        store_name='${(0,E.dbEscape)(_)}',
        firstname='${e}',
        lastname='${a}',
        email='${s}',
        from_email='',
        telephone='${r}',
        fax='',
        password='${(0,E.dbEscape)(c)}',
        salt='${(0,E.dbEscape)(f)}',
        company='',
        website='',
        address_1='',
        address_2='',
        city='',
        postcode='',
        country_id='0',
        zone_id='0',
        code='',
        is_customer_own_domain='0',
        is_domain_available='0',
        stripe_token='',
        stripe_customer_id='',
        stripe_plan_id='',
        recurring_billing='0',
        recurring_billing_id='0',
        start_date=NOW(),
        end_date=NOW(),
        store_category_type='0',
        commission='0',
        tax='',
        payment='',
        cheque='',
        paypal='',
        bank_name='',
        bank_branch_number='',
        bank_swift_code='',
        bank_account_name='',
        bank_account_number='',
        ip='${(0,E.dbEscape)(i)}',
        status='0',
        newsletter='1',
        newsletter_text='0',
        affiliate_status_id='15',
        approved='0',
        stop_automation='0',
        user_added='0',
        user_modified='0',
        date_added=NOW(),
        date_modified=NOW(),
        date_update=NOW(),
        is_delete='0'
    `,[m]=await h.db.query(p),g=m.insertId;return await w(g,"register_step1_submit",{step:1,firstname:t.firstname,lastname:t.lastname,email:t.email,telephone:t.telephone},i,120),Response.json({success:!0,step:1,affiliate_id:g,mode:"inserted"})}if(2===a){let e=Number(t.affiliate_id||0);if(!e)return Response.json({message:"affiliate_id is required"},{status:400});if(!await q(e))return Response.json({message:"Affiliate not found"},{status:404});let a=Number(t.affiliate_plan_id||0),s=Number(t.fees||0),r=(0,E.dbEscape)(t.business_name),o=(0,E.stripWebsite)(t.website||""),n=(0,E.dbEscape)(o),d=(0,E.dbEscape)(t.stripe_plan_id||"");if(t.price_schema,t.default_markup,t.retail_price_commission,t.is_catalog_access,!a)return Response.json({message:"affiliate_plan_id is required"},{status:400});if(!r)return Response.json({message:"business_name is required"},{status:400});if(r.length<3||r.length>32)return Response.json({message:"Business name must be between 3 to 32 characters"},{status:400});if(o&&!/^[a-z0-9.-]+\.[a-z]{2,}$/i.test(o))return Response.json({message:"Website must be a valid domain like example.com"},{status:400});let[l]=await h.db.query(`SELECT affiliate_id FROM affiliate WHERE LOWER(store_name)=LOWER('${(0,E.dbEscape)(r)}') AND affiliate_id<>${e} LIMIT 1`);if(l?.length)return Response.json({message:"Business name already exists"},{status:409});if(o){let[t]=await h.db.query(`SELECT affiliate_id FROM affiliate WHERE LOWER(website)=LOWER('${(0,E.dbEscape)(o)}') AND affiliate_id<>${e} LIMIT 1`);if(t?.length)return Response.json({message:"Website already exists"},{status:409})}return await h.db.query(`
      UPDATE affiliate SET
        affiliate_type='${a}',
        fees='${s}',
        store_name='${r}',
        website='${n}',
        stripe_plan_id='${d}',
        date_modified=NOW(),
        ip='${(0,E.dbEscape)(i)}'
      WHERE affiliate_id=${e}
    `),await w(e,"register_step2_submit",{step:2,affiliate_plan_id:a,business_name:t.business_name,website:o||""},i,120),Response.json({success:!0,step:2,affiliate_id:e})}if(3===a){let e=Number(t.affiliate_id||0);if(!e)return Response.json({message:"affiliate_id is required"},{status:400});if(!await q(e))return Response.json({message:"Affiliate not found"},{status:404});let a=(0,E.dbEscape)(t.address_1),s=(0,E.dbEscape)(t.address_2||""),r=(0,E.dbEscape)(t.city),o=(0,E.dbEscape)(t.postcode),n=Number(t.country_id||0),d=Number(t.zone_id||0),l=(0,E.dbEscape)(t.password??""),_=(0,E.dbEscape)(t.confirm??""),f=!0===t.agree_terms||"true"===t.agree_terms||"1"===t.agree_terms||1===t.agree_terms;if(!a)return Response.json({message:"address_1 is required"},{status:400});if(!r)return Response.json({message:"city is required"},{status:400});if(!n)return Response.json({message:"country_id is required"},{status:400});if(!d)return Response.json({message:"zone_id is required"},{status:400});if(!l)return Response.json({message:"password is required"},{status:400});if(l.length<6||l.length>20)return Response.json({message:"Password must be between 6 to 20 characters"},{status:400});if(l!==_)return Response.json({message:"Passwords do not match"},{status:400});if(!f)return Response.json({message:"You must agree to the Terms & Conditions"},{status:400});let u=Number(t.price_schema||0),c=Number(t.default_markup||0);t.retail_price_commission;let p=t.is_catalog_access,m=(0,E.generateSalt)(),g=(0,E.ocHashPassword)(l,m);await h.db.query(`
      UPDATE affiliate SET
        affiliate_status_id='1',
        address_1='${a}',
        address_2='${s}',
        city='${r}',
        postcode='${o}',
        country_id='${n}',
        zone_id='${d}',
        password='${(0,E.dbEscape)(g)}',
        salt='${(0,E.dbEscape)(m)}',
        date_modified=NOW(),
        ip='${(0,E.dbEscape)(i)}'
      WHERE affiliate_id=${e}
    `),await w(e,"register_step3_submit",{step:3,city:t.city,country_id:n,zone_id:d},i,120),await w(e,"redirect_to_payment",{affiliate_id:e,url:`/register/payment/${e}`},i,120);let b=(0,E.dbEscape)(aff.firstname||""),I=(0,E.dbEscape)(aff.lastname||""),C=(0,E.dbEscape)(String(aff.email||"")).toLowerCase(),j=(0,E.dbEscape)(aff.telephone||""),x=(0,E.dbEscape)(aff.store_name||""),W=(0,E.dbEscape)(aff.website||""),D=`INSERT INTO affiliate_user SET
      affiliate_id='${e}',
      username='${C}',
      password='${(0,E.dbEscape)(g)}',
      salt='${(0,E.dbEscape)(m)}',
      firstname='${b}',
      lastname='${I}',
      email='${C}',
      telephone='${j}',
      image='',
      code='',
      ip='${(0,E.dbEscape)(i)}',
      status='0',
      user_added='0',
      date_added=NOW(),
      date_modified=NOW(),
      is_delete=0
    `;await h.db.query(D),await y("total","sub_total",e),await R("affiliate_sub_total",{affiliate_sub_total_status:"1",affiliate_sub_total_sort_order:"1"},e),await y("total","shipping",e),await R("affiliate_shipping",{affiliate_shipping_status:"2",affiliate_shipping_sort_order:"10"},e),await y("total","coupon",e),await R("affiliate_coupon",{affiliate_coupon_status:"1",affiliate_coupon_sort_order:"3"},e),await y("total","credit",e),await R("affiliate_credit",{affiliate_credit_status:"1",affiliate_credit_sort_order:"4"},e),await y("total","reward",e),await R("affiliate_reward",{affiliate_reward_status:"1",affiliate_reward_sort_order:"5"},e),await y("total","total",e),await R("affiliate_total",{affiliate_total_status:"1",affiliate_total_sort_order:"100"},e);let k=await $(),P={};1===u||3===u?P.affiliate_config_markup=c||30:P.affiliate_config_markup=0,P.affiliate_config_name=x,P.affiliate_config_url=W,P.affiliate_config_owner=`${b} ${I}`.trim();let M=a;if(s&&""!==s.trim()&&(M+=`, ${s}`),M+=`, ${r}`,P.affiliate_config_address=M+=` - ${o}`,P.affiliate_config_email=C,P.affiliate_config_telephone=j,P.affiliate_config_visible_telephone=1,P.affiliate_config_meta_title=x,P.affiliate_config_country_id=n,P.affiliate_config_zone_id=d,P.affiliate_config_currency="USD",P.affiliate_config_order_status_id=2,P.affiliate_config_processing_status=[2],P.affiliate_config_complete_status=[5,15],P.affiliate_config_image_category_width=1200,P.affiliate_config_image_category_height=300,P.affiliate_config_image_product_width=370,P.affiliate_config_image_product_height=370,P.affiliate_config_image_popup_width=1e3,P.affiliate_config_image_popup_height=1e3,P.affiliate_config_image_thumb_width=370,P.affiliate_config_image_thumb_height=370,P.affiliate_config_image_additional_width=475,P.affiliate_config_image_additional_height=475,P.affiliate_config_image_catalog_width=600,P.affiliate_config_image_catalog_height=482,P.affiliate_config_template="default",P.affiliate_config_checkout_guest=1,P.affiliate_config_apply_store_coupons=1,P.affiliate_config_subscribe_status=1,P.affiliate_config_subscribe_heading="Subscribe to our Newsletter",P.affiliate_config_subscribe_top_text=`<p style="margin-top:15px; line-height: 22px;">Enter your email address to get the hottest deals Online. </p>
<p style="margin-top:15px; line-height: 22px;"><span style="font-weight: bold;">You will be the first </span>to know about our offers, new arrivals, and more!<br></p>`,P.affiliate_config_subscribe_bottom_text='<p style="line-height: 22px;">We value our customers and will not share your email address to any third party. You will not be spammed.<br></p>',P.affiliate_config_subscribe_button_text="",P.affiliate_config_subscribe_image_position="left",P.affiliate_config_subscribe_success="Success: Your email address subscribed successfully!",P.affiliate_config_footer_description=k?.affiliate_basic_footer_description?String(k.affiliate_basic_footer_description):"We are carrying the biggest collection for church fashions which includes all the designer church suits, church dresses and church hats.",P.affiliate_config_catalog_column=3,P.affiliate_config_pp_standard_email=C,P.affiliate_config_pp_standard_status=1,P.affiliate_config_pp_standard_test=0,P.affiliate_config_pp_standard_debug=0,P.affiliate_config_pp_standard_transaction=1,P.affiliate_config_tagline=k?.affiliate_basic_tagline?k.affiliate_basic_tagline:"Leading Church Fashion Brand",P.affiliate_config_display_address=0,await R("affiliate_config",P,e),(0,E.isTruthy)(p)){let t=await N(e);await T(e,t)}return await S(e,[{name:"About Us",description:"About Us",meta_title:"About Us",meta_description:"About Us",sort_order:"1",status:"1"}]),await O(e),await v(e),await A(e),Response.json({success:!0,step:3,affiliate_id:e})}return Response.json({message:"Invalid step"},{status:400})}e.s(["POST",()=>x],67150);var W=e.i(67150);let D=new t.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/affiliate/register/route",pathname:"/api/affiliate/register",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/src/app/api/affiliate/register/route.js",nextConfigOutput:"",userland:W}),{workAsyncStorage:k,workUnitAsyncStorage:P,serverHooks:M}=D;function L(){return(0,i.patchFetch)({workAsyncStorage:k,workUnitAsyncStorage:P})}async function H(e,t,i){D.isDev&&(0,s.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let h="/api/affiliate/register/route";h=h.replace(/\/index$/,"")||"/";let E=await D.prepare(e,t,{srcPage:h,multiZoneDraftMode:!1});if(!E)return t.statusCode=400,t.end("Bad Request"),null==i.waitUntil||i.waitUntil.call(i,Promise.resolve()),null;let{buildId:w,params:y,nextConfig:R,parsedUrl:$,isDraftMode:N,prerenderManifest:T,routerServerContext:S,isOnDemandRevalidate:O,revalidateOnlyGenerated:v,resolvedPathname:I,clientReferenceManifest:C,serverActionsManifest:A}=E,q=(0,n.normalizeAppPath)(h),j=!!(T.dynamicRoutes[q]||T.routes[I]),x=async()=>((null==S?void 0:S.render404)?await S.render404(e,t,$,!1):t.end("This page could not be found"),null);if(j&&!N){let e=!!T.routes[I],t=T.dynamicRoutes[q];if(t&&!1===t.fallback&&!e){if(R.experimental.adapterPath)return await x();throw new g.NoFallbackError}}let W=null;!j||D.isDev||N||(W="/index"===(W=I)?"/":W);let k=!0===D.isDev||!j,P=j&&!k;A&&C&&(0,o.setManifestsSingleton)({page:h,clientReferenceManifest:C,serverActionsManifest:A});let M=e.method||"GET",L=(0,r.getTracer)(),H=L.getActiveScopeSpan(),U={params:y,prerenderManifest:T,renderOpts:{experimental:{authInterrupts:!!R.experimental.authInterrupts},cacheComponents:!!R.cacheComponents,supportsDynamicResponse:k,incrementalCache:(0,s.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:R.cacheLife,waitUntil:i.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,a,i,s)=>D.onRequestError(e,t,i,s,S)},sharedContext:{buildId:w}},F=new d.NodeNextRequest(e),z=new d.NodeNextResponse(t),B=l.NextRequestAdapter.fromNodeNextRequest(F,(0,l.signalFromNodeResponse)(t));try{let o=async e=>D.handle(B,U).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let a=L.getRootSpanAttributes();if(!a)return;if(a.get("next.span_type")!==_.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${a.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let i=a.get("next.route");if(i){let t=`${M} ${i}`;e.setAttributes({"next.route":i,"http.route":i,"next.span_name":t}),e.updateName(t)}else e.updateName(`${M} ${h}`)}),n=!!(0,s.getRequestMeta)(e,"minimalMode"),d=async s=>{var r,d;let l=async({previousCacheEntry:a})=>{try{if(!n&&O&&v&&!a)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let r=await o(s);e.fetchMetrics=U.renderOpts.fetchMetrics;let d=U.renderOpts.pendingWaitUntil;d&&i.waitUntil&&(i.waitUntil(d),d=void 0);let l=U.renderOpts.collectedTags;if(!j)return await (0,u.sendResponse)(F,z,r,U.renderOpts.pendingWaitUntil),null;{let e=await r.blob(),t=(0,c.toNodeOutgoingHttpHeaders)(r.headers);l&&(t[m.NEXT_CACHE_TAGS_HEADER]=l),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let a=void 0!==U.renderOpts.collectedRevalidate&&!(U.renderOpts.collectedRevalidate>=m.INFINITE_CACHE)&&U.renderOpts.collectedRevalidate,i=void 0===U.renderOpts.collectedExpire||U.renderOpts.collectedExpire>=m.INFINITE_CACHE?void 0:U.renderOpts.collectedExpire;return{value:{kind:b.CachedRouteKind.APP_ROUTE,status:r.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:a,expire:i}}}}catch(t){throw(null==a?void 0:a.isStale)&&await D.onRequestError(e,t,{routerKind:"App Router",routePath:h,routeType:"route",revalidateReason:(0,f.getRevalidateReason)({isStaticGeneration:P,isOnDemandRevalidate:O})},!1,S),t}},_=await D.handleResponse({req:e,nextConfig:R,cacheKey:W,routeKind:a.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:T,isRoutePPREnabled:!1,isOnDemandRevalidate:O,revalidateOnlyGenerated:v,responseGenerator:l,waitUntil:i.waitUntil,isMinimalMode:n});if(!j)return null;if((null==_||null==(r=_.value)?void 0:r.kind)!==b.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==_||null==(d=_.value)?void 0:d.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});n||t.setHeader("x-nextjs-cache",O?"REVALIDATED":_.isMiss?"MISS":_.isStale?"STALE":"HIT"),N&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let g=(0,c.fromNodeOutgoingHttpHeaders)(_.value.headers);return n&&j||g.delete(m.NEXT_CACHE_TAGS_HEADER),!_.cacheControl||t.getHeader("Cache-Control")||g.get("Cache-Control")||g.set("Cache-Control",(0,p.getCacheControlHeader)(_.cacheControl)),await (0,u.sendResponse)(F,z,new Response(_.value.body,{headers:g,status:_.value.status||200})),null};H?await d(H):await L.withPropagatedContext(e.headers,()=>L.trace(_.BaseServerSpan.handleRequest,{spanName:`${M} ${h}`,kind:r.SpanKind.SERVER,attributes:{"http.method":M,"http.target":e.url}},d))}catch(t){if(t instanceof g.NoFallbackError||await D.onRequestError(e,t,{routerKind:"App Router",routePath:q,routeType:"route",revalidateReason:(0,f.getRevalidateReason)({isStaticGeneration:P,isOnDemandRevalidate:O})},!1,S),j)throw t;return await (0,u.sendResponse)(F,z,new Response(null,{status:500})),null}}e.s(["handler",()=>H,"patchFetch",()=>L,"routeModule",()=>D,"serverHooks",()=>M,"workAsyncStorage",()=>k,"workUnitAsyncStorage",()=>P],39887)}];

//# sourceMappingURL=node_modules_next_dist_esm_build_templates_app-route_31bf24e5.js.map